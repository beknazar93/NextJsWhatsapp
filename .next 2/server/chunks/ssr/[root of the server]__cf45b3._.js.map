{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/User/Desktop/Online%20Urok/individual/%D0%90%D0%BB%D1%8B%D0%BC%D0%B1%D0%B5%D0%BA/React/whasapp/whatsapp/src/components/Chat.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\n\r\nlet socket;\r\n\r\nexport default function Chat() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [confirmedUsername, setConfirmedUsername] = useState(false); // Новое состояние\r\n  const [typingUsers, setTypingUsers] = useState([]);\r\n\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    socket = io({\r\n      path: \"/api/socket\",\r\n    });\r\n\r\n    socket.on(\"newMessage\", (message) => {\r\n      setMessages((prev) => [...prev, message]);\r\n    });\r\n\r\n    socket.on(\"typing\", (users) => {\r\n      setTypingUsers(users);\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  const handleSendMessage = () => {\r\n    if (message.trim()) {\r\n      socket.emit(\"sendMessage\", { username: confirmedUsername, text: message });\r\n      setMessage(\"\");\r\n      socket.emit(\"stopTyping\", confirmedUsername);\r\n    }\r\n  };\r\n\r\n  const handleTyping = () => {\r\n    if (message.trim()) {\r\n      socket.emit(\"startTyping\", confirmedUsername);\r\n    } else {\r\n      socket.emit(\"stopTyping\", confirmedUsername);\r\n    }\r\n  };\r\n\r\n  const handleConfirmUsername = () => {\r\n    if (username.trim()) {\r\n      setConfirmedUsername(username);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", flexDirection: \"column\", height: \"100vh\" }}>\r\n      {!confirmedUsername && (\r\n        <div style={{ marginBottom: \"10px\" }}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Введите ваше имя\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            style={{ padding: \"5px\", width: \"80%\", marginRight: \"10px\" }}\r\n          />\r\n          <button\r\n            onClick={handleConfirmUsername}\r\n            style={{ padding: \"5px 10px\" }}\r\n          >\r\n            Подтвердить\r\n          </button>\r\n        </div>\r\n      )}\r\n      {confirmedUsername && (\r\n        <>\r\n          <div\r\n            style={{\r\n              flex: 1,\r\n              overflow: \"auto\",\r\n              border: \"1px solid black\",\r\n              padding: \"10px\",\r\n            }}\r\n          >\r\n            {messages.map((message, index) => (\r\n              <div key={index}>\r\n                <strong>{message.username}</strong>: {message.text}\r\n              </div>\r\n            ))}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n          <div\r\n            style={{\r\n              height: \"30px\",\r\n              fontStyle: \"italic\",\r\n              margin: \"5px 0\",\r\n            }}\r\n          >\r\n            {typingUsers.length > 0 &&\r\n              `${typingUsers.join(\", \")} ${\r\n                typingUsers.length > 1 ? \"печатают\" : \"печатает\"\r\n              }...`}\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              padding: \"10px\",\r\n              borderTop: \"1px solid black\",\r\n            }}\r\n          >\r\n            <input\r\n              type=\"text\"\r\n              value={message}\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              onKeyUp={handleTyping}\r\n              placeholder=\"Введите ваше сообщение\"\r\n              style={{\r\n                flex: 1,\r\n                marginRight: \"10px\",\r\n                padding: \"5px\",\r\n              }}\r\n            />\r\n            <button\r\n              style={{ padding: \"10px 20px\" }}\r\n              onClick={handleSendMessage}\r\n            >\r\n              Отправить\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/User/Desktop/Online%20Urok/individual/%D0%90%D0%BB%D1%8B%D0%BC%D0%B1%D0%B5%D0%BA/React/whasapp/whatsapp/src/pages/chat.js"],"sourcesContent":["import Chat from '../components/Chat';\r\n\r\nexport default function ChatPage() {\r\n  return <Chat />;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;;AAEe,SAAS;IACtB,qBAAO,qKAAC,kHAAA,CAAA,UAAI;;;;;AACd"}},
    {"offset": {"line": 302, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/User/Desktop/Online%20Urok/individual/%D0%90%D0%BB%D1%8B%D0%BC%D0%B1%D0%B5%D0%BA/React/whasapp/whatsapp/src/pages/index.js"],"sourcesContent":["import Chat from \"./chat\";\r\n\r\n\r\nexport default function Home() {\r\n    return (\r\n        <div>\r\n            <p>Home page</p>\r\n        <Chat />\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;AAAA;;;;;;;AAGe,SAAS;IACpB,qBACI,qKAAC;;0BACG,qKAAC;0BAAE;;;;;;0BACP,qKAAC,6GAAA,CAAA,UAAI;;;;;;;;;;;AAGb"}},
    {"offset": {"line": 342, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}